if(window==window.parent){document.observe("dom:loaded",function(){var a=new Alice.Application();window.alice=a;var b={images:"show",avatars:"show"};var c=/site\.js\?(.*)?$/;$$("script[src]").findAll(function(e){return e.src.match(c)}).each(function(e){var f=e.src.match(c)[1];f.split("&").each(function(h){var g=h.split("=");b[g[0]]=g[1]})});a.options=b;var d=console.log;console.log=function(){if(b.debug=="true"&&console){d.apply(console,arguments)}};$$("ul.messages li.avatar:not(.consecutive) + li:not(.consecutive)").each(function(e){e.previous().setStyle({minHeight:"42px"})});$$("span.timestamp").each(function(e){e.innerHTML=Alice.epochToLocal(e.innerHTML.trim())});$("helpclose").observe("click",function(){$("help").hide()});$$("#config_overlay option").each(function(e){e.selected=false});$("tab_overflow_overlay").observe("change",function(g){var f=a.getWindow($("tab_overflow_overlay").value);if(f){f.focus()}});$("config_overlay").observe("change",function(f){switch($("config_overlay").value){case"Logs":a.toggleLogs(f);break;case"Connections":a.toggleConfig(f);break;case"Preferences":a.togglePrefs(f);break;case"Logout":if(confirm("Logout?")){window.location="/logout"}break;case"Help":a.toggleHelp();break}$$("#config_overlay option").each(function(e){e.selected=false})});window.onkeydown=function(g){var f=a.activeWindow();if(f&&!$("config")&&!Alice.isSpecialKey(g.which)){f.input.focus()}};window.onresize=function(){if(a.activeWindow()){if(Prototype.Browser.Gecko){a.activeWindow().resizeMessagearea()}a.activeWindow().scrollToBottom()}};window.onfocus=function(){if(!Prototype.Browser.MobileSafari){window.document.body.removeClassName("blurred")}if(a.activeWindow()){a.activeWindow().input.focus()}a.isFocused=true;a.clearMissed()};window.status=" ";window.onblur=function(){if(!Prototype.Browser.MobileSafari){window.document.body.addClassName("blurred")}a.isFocused=false};window.onhashchange=a.focusHash.bind(a);window.onorientationchange=function(){a.activeWindow().scrollToBottom(true)};a.addFilters([function(f){var e=f;e=e.replace(/(<a href=\"(:?.*?\.(:?wav|mp3|ogg|aiff|m4a))")/gi,'<img src="/static/image/play.png" onclick="Alice.playAudio(this)" class="audio"/>$1');return e},function(f){var e=f;if(a.options.images=="show"){e=e.replace(/(<a[^>]*>)([^<]*\.(:?jpe?g|gif|png|bmp|svg)(:?\?v=0)?)</gi,'$1<img src="http://i.usealice.org/$2" onload="Alice.loadInlineImage(this)" alt="Loading Image..." title="$2" style="display:none"/><')}return e}])})};