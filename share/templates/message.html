? my ($app, $msg) = @_;
<li class="message <?= $msg->{nick} ?>
  <? if ($msg->{self}) { ?> self<?}?>" id="<?= $msg->{msgid} ?>">
    <div class="left">
      <a href="javascript:alice.connection.requestWindow('<?= $msg->{nick} ?>','<?= $msg->{window}{id} ?>')" class="nick">
        <? if ($msg->{avatar} and ($app->config->{avatars} eq "show")) { ?>
          <img src="<?= $msg->{avatar} ?>" alt="<?= $msg->{nick} ?>" />
          <span class="nickhint"><?= $msg->{nick} ?></span>
        <? } else { ?>
          <?= $msg->{nick} ?>
        <?}?>
      </a>
    </div>
    <? if ($msg->{timestamp}) { ?>
    <div class="timehint"><?= $msg->{timestamp} ?></div>
    <? } ?>
    <div class="msg<? if ($msg->{monospaced}) { ?> monospace<?}?>"></div>
  <hr />
</li>
